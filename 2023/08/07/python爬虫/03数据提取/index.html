<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"tianhei.top","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.17.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="本阶段课程主要学习获取响应之后如何从响应中提取我们想要的数据，在本阶段课程中我们会讲解一些常用的方法和模块，基本上我们以后遇到的情况在常握本阶段课程之后都能搞定">
<meta property="og:type" content="article">
<meta property="og:title" content="数据提取">
<meta property="og:url" content="http://tianhei.top/2023/08/07/python%E7%88%AC%E8%99%AB/03%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/index.html">
<meta property="og:site_name" content="天海工作室">
<meta property="og:description" content="本阶段课程主要学习获取响应之后如何从响应中提取我们想要的数据，在本阶段课程中我们会讲解一些常用的方法和模块，基本上我们以后遇到的情况在常握本阶段课程之后都能搞定">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163100201.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163109790.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163117146.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163125621.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163134734.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163145914.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163155306.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163328682.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163340471.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163351205.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163358570.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163408884.png">
<meta property="og:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163418582.png">
<meta property="article:published_time" content="2023-08-07T08:30:13.000Z">
<meta property="article:modified_time" content="2023-08-07T08:37:18.222Z">
<meta property="article:author" content="天海">
<meta property="article:tag" content="python">
<meta property="article:tag" content="爬虫　">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163100201.png">


<link rel="canonical" href="http://tianhei.top/2023/08/07/python%E7%88%AC%E8%99%AB/03%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://tianhei.top/2023/08/07/python%E7%88%AC%E8%99%AB/03%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/","path":"2023/08/07/python爬虫/03数据提取/","title":"数据提取"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>数据提取 | 天海工作室</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">天海工作室</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96%EF%BC%9F"><span class="nav-number">1.</span> <span class="nav-text">什么是数据提取？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E4%B8%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%93%AA%E9%87%8C"><span class="nav-number">2.</span> <span class="nav-text">页面上的数据在哪里</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E5%86%85%E5%AE%B9%E7%9A%84%E5%88%86%E7%B1%BB"><span class="nav-number">3.</span> <span class="nav-text">响应内容的分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A4%E8%AF%86xml%E4%BB%A5%E5%8F%8A%E5%92%8Chtml%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">4.</span> <span class="nav-text">认识xml以及和html的区别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A4%E8%AF%86xml"><span class="nav-number">4.1.</span> <span class="nav-text">认识xml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xml%E5%92%8Chtml%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">4.2.</span> <span class="nav-text">xml和html的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E8%A7%A3%E6%9E%90%E6%96%B9%E6%B3%95"><span class="nav-number">4.3.</span> <span class="nav-text">常用数据解析方法</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#jsonpath%E6%A8%A1%E5%9D%97"><span class="nav-number"></span> <span class="nav-text">jsonpath模块</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#jsonpath%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-number">1.</span> <span class="nav-text">jsonpath模块的使用场景</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jsonpath%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">2.</span> <span class="nav-text">jsonpath模块的使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#jsonpath%E6%A8%A1%E5%9D%97%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">2.1.</span> <span class="nav-text">jsonpath模块的安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsonpath%E6%A8%A1%E5%9D%97%E6%8F%90%E5%8F%96%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E6%B3%95"><span class="nav-number">2.2.</span> <span class="nav-text">jsonpath模块提取数据的方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsonpath%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99"><span class="nav-number">2.3.</span> <span class="nav-text">jsonpath语法规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsonpath%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.4.</span> <span class="nav-text">jsonpath使用示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsonpath%E7%BB%83%E4%B9%A0"><span class="nav-number">2.5.</span> <span class="nav-text">jsonpath练习</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%88%AC%E8%99%AB%E5%AF%B9html%E6%8F%90%E5%8F%96%E7%9A%84%E5%86%85%E5%AE%B9"><span class="nav-number">2.6.</span> <span class="nav-text">爬虫对html提取的内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lxml%E6%A8%A1%E5%9D%97%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">2.7.</span> <span class="nav-text">lxml模块的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-lxml%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.8.</span> <span class="nav-text">7.4  lxml模块使用示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#lxml%E6%A8%A1%E5%9D%97%E4%B8%ADetree-tostring%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">3.</span> <span class="nav-text">lxml模块中etree.tostring函数的使用</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-number"></span> <span class="nav-text">正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">1.</span> <span class="nav-text">概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">作用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%8C%B9%E9%85%8D%E7%AC%A6"><span class="nav-number">3.</span> <span class="nav-text">常用匹配符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#re%E6%A8%A1%E5%9D%97%E5%B8%B8%E7%94%A8%E7%9A%84%E5%87%BD%E6%95%B0"><span class="nav-number">4.</span> <span class="nav-text">re模块常用的函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E7%BB%84"><span class="nav-number">5.</span> <span class="nav-text">分组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B4%AA%E5%A9%AA%E6%A8%A1%E5%BC%8F%E5%92%8C%E9%9D%9E%E8%B4%AA%E5%A9%AA"><span class="nav-number">6.</span> <span class="nav-text">贪婪模式和非贪婪</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BeautifulSoup4%E5%BA%93"><span class="nav-number"></span> <span class="nav-text">BeautifulSoup4库</span></a></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="天海"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">天海</p>
  <div class="site-description" itemprop="description">路漫漫其修远兮，吾将上下而求索！</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">21</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/tianheihj" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tianheihj" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:tianheiwy@163.com" title="E-Mail → mailto:tianheiwy@163.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://theme-next.iissnan.com/" title="https:&#x2F;&#x2F;theme-next.iissnan.com&#x2F;" rel="noopener" target="_blank">next主题配置</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://tianhei.top/2023/08/07/python%E7%88%AC%E8%99%AB/03%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="天海">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天海工作室">
      <meta itemprop="description" content="路漫漫其修远兮，吾将上下而求索！">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="数据提取 | 天海工作室">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          数据提取
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2023-08-07 16:30:13 / 修改时间：16:37:18" itemprop="dateCreated datePublished" datetime="2023-08-07T16:30:13+08:00">2023-08-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%88%AC%E8%99%AB/" itemprop="url" rel="index"><span itemprop="name">爬虫</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>本阶段课程主要学习获取响应之后如何从响应中提取我们想要的数据，在本阶段课程中我们会讲解一些常用的方法和模块，基本上我们以后遇到的情况在常握本阶段课程之后都能搞定</p>
<span id="more"></span>

<h2 id="什么是数据提取？"><a href="#什么是数据提取？" class="headerlink" title="什么是数据提取？"></a>什么是数据提取？</h2><p>简单的来说，数据提取就是从响应中获取我们想要的数据的过程</p>
<h2 id="页面上的数据在哪里"><a href="#页面上的数据在哪里" class="headerlink" title="页面上的数据在哪里"></a>页面上的数据在哪里</h2><ul>
<li>当前url地址对应的响应中</li>
<li>其他的u地址对应的响应中<ul>
<li>比如ajax请求中</li>
</ul>
</li>
<li>js生成的<ul>
<li>部分数据在响应中</li>
<li>全部通过js生成</li>
</ul>
</li>
</ul>
<h2 id="响应内容的分类"><a href="#响应内容的分类" class="headerlink" title="响应内容的分类"></a>响应内容的分类</h2><blockquote>
<p>在发送请求获取响应之后，可能存在多种不同类型的响应内容；而且很多时候，我们只需要响应内容中的一部分数据</p>
</blockquote>
<ul>
<li><p>结构化的响应内容</p>
<ul>
<li><p>json字符串</p>
<ul>
<li>可以使用re、json等模块来提取特定数据</li>
</ul>
</li>
<li><p>xml字符串</p>
<ul>
<li>可以使用re、xml等模块来提取特定数据</li>
</ul>
</li>
</ul>
</li>
<li><p>非结构化的响应内容</p>
<ul>
<li><p>html字符串</p>
<ul>
<li>可以使用re、xml等模块来提取特定数据</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="认识xml以及和html的区别"><a href="#认识xml以及和html的区别" class="headerlink" title="认识xml以及和html的区别"></a>认识xml以及和html的区别</h2><blockquote>
<p>要搞清楚html和xml的区别，首先需要我们来认识xml</p>
</blockquote>
<h3 id="认识xml"><a href="#认识xml" class="headerlink" title="认识xml"></a>认识xml</h3><blockquote>
<p>xml是一种可扩展标记语言，样子和html很像，功能更专注于对传输和存储数据</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bookstore</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">book</span> <span class="attr">category</span>=<span class="string">&quot;COOKING&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>Everyday Italian<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>Giada De Laurentiis<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">year</span>&gt;</span>2005<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>30.00<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">book</span> <span class="attr">category</span>=<span class="string">&quot;CHILDREN&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span>Harry Potter<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>]K.Rowling<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">year</span>&gt;</span>2005<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pr1ce</span>&gt;</span>29.99<span class="tag">&lt;/<span class="name">pr1ce</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">book</span> <span class="attr">category</span>=<span class="string">&quot;WEB&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span> <span class="attr">lang-</span>&quot;<span class="attr">en</span>&quot;&gt;</span>Learning XML<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">author</span>&gt;</span>Erik T.Ray<span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">year</span>&gt;</span>2003<span class="tag">&lt;/<span class="name">year</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>39.95<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">book</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bookstore</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的xml内容可以表示为下面的树结构：</p>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163100201.png" alt="image-20230807163100201"></p>
<h3 id="xml和html的区别"><a href="#xml和html的区别" class="headerlink" title="xml和html的区别"></a>xml和html的区别</h3><blockquote>
<p>二者区别如下图</p>
</blockquote>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163109790.png" alt="image-20230807163109790"></p>
<ul>
<li>html:<ul>
<li>超文本标记语言</li>
<li>为了更好的显示数据，侧重点是为了显示</li>
</ul>
</li>
<li>xml<ul>
<li>可扩展标记语言</li>
<li>为了传输和存储数据，侧重点是在于数据内容本身</li>
</ul>
</li>
</ul>
<h3 id="常用数据解析方法"><a href="#常用数据解析方法" class="headerlink" title="常用数据解析方法"></a>常用数据解析方法</h3><p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163117146.png" alt="image-20230807163117146"></p>
<h1 id="jsonpath模块"><a href="#jsonpath模块" class="headerlink" title="jsonpath模块"></a>jsonpath模块</h1><p><strong>知识点</strong></p>
<ul>
<li>了解jsonpath模块的使用场景</li>
<li>掌握jsonpath模块的使用</li>
</ul>
<p>由于把json数据转化为oython内建数据类型很简单，所以爬虫中，如果我们能够找到返回ison数据的URL,就会尽量使用这种URL</p>
<p>JSON(JavaScript Object Notation)是一种轻量级的数据交换格式，它使得人们很容易的进行阅读和编写。同时也方便了机器进行解析和生成。适用于进行数据交互的场景，比如网站前台与后台之间的数据交互。</p>
<h2 id="jsonpath模块的使用场景"><a href="#jsonpath模块的使用场景" class="headerlink" title="jsonpath模块的使用场景"></a>jsonpath模块的使用场景</h2><blockquote>
<p>如果有一个多层嵌套的复杂字典，想要根据key和下标来批量提取value，这是比较困难的。jsonpath模块就能解决这个痛点，接下来我们就来学习jsonpath模块</p>
</blockquote>
<p><strong>jsonpath可以按照key对python字典进行批量数据提取</strong></p>
<h2 id="jsonpath模块的使用方法"><a href="#jsonpath模块的使用方法" class="headerlink" title="jsonpath模块的使用方法"></a>jsonpath模块的使用方法</h2><h3 id="jsonpath模块的安装"><a href="#jsonpath模块的安装" class="headerlink" title="jsonpath模块的安装"></a>jsonpath模块的安装</h3><blockquote>
<p>jsonpath:是第三方模块，需要额外安装</p>
</blockquote>
<p>pip install jsonpath</p>
<h3 id="jsonpath模块提取数据的方法"><a href="#jsonpath模块提取数据的方法" class="headerlink" title="jsonpath模块提取数据的方法"></a>jsonpath模块提取数据的方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> jsonpath <span class="keyword">import</span> jsonpath</span><br><span class="line">ret = jsonpath(a,<span class="string">&#x27;jsonpath语法规则字符串&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="jsonpath语法规则"><a href="#jsonpath语法规则" class="headerlink" title="jsonpath语法规则"></a>jsonpath语法规则</h3><p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163125621.png" alt="image-20230807163125621"></p>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163134734.png" alt="image-20230807163134734"></p>
<p>具有read()或者write(O方法的对象就是类文件对象</p>
<p>f &#x3D; open(“a.txt”，”r”)f就是类文件对象</p>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163145914.png" alt="image-20230807163145914"></p>
<p>json在数据交换中起到了一个载体的作用，承载着相互传递的数据</p>
<p>json使用注意点</p>
<ul>
<li>json中的字符串都是双引号引起来的<ul>
<li>如果不是双引号<ul>
<li>eval：能实现简单的字符串和python类型的转化</li>
<li>replace：把单引号替换为双引号</li>
</ul>
</li>
</ul>
</li>
<li>往一个文件中写入多个json串，不再是一个json串，不能直接读取<ul>
<li>一行写一个json串，按照行来读取</li>
</ul>
</li>
</ul>
<h3 id="jsonpath使用示例"><a href="#jsonpath使用示例" class="headerlink" title="jsonpath使用示例"></a>jsonpath使用示例</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">book_dict = &#123;</span><br><span class="line">    <span class="string">&quot;stdre&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;book&quot;</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;category&quot;</span>:<span class="string">&quot;reference&quot;</span>,</span><br><span class="line">                <span class="string">&quot;author&quot;</span>:<span class="string">&quot;Nigel Rees&quot;</span>,</span><br><span class="line">                <span class="string">&quot;title&quot;</span>:<span class="string">&quot;Sayings of the Century&quot;</span>,</span><br><span class="line">                <span class="string">&quot;price&quot;</span>:<span class="number">8.95</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;category&quot;</span>:<span class="string">&quot;fiction&quot;</span>,</span><br><span class="line">                <span class="string">&quot;author&quot;</span>:<span class="string">&quot;Evelyn Waugh&quot;</span>,</span><br><span class="line">                <span class="string">&quot;title&quot;</span>:<span class="string">&quot;Sword of Honour&quot;</span>,</span><br><span class="line">                <span class="string">&quot;price&quot;</span>:<span class="number">12.99</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;category&quot;</span>:<span class="string">&quot;fiction&quot;</span>,</span><br><span class="line">                <span class="string">&quot;author&quot;</span>:<span class="string">&quot;Herman Melville&quot;</span>,</span><br><span class="line">                <span class="string">&quot;title&quot;</span>:<span class="string">&quot;Moby Dick&quot;</span>,</span><br><span class="line">                <span class="string">&quot;isbn&quot;</span>:<span class="string">&quot;0-553-21311-3&quot;</span>,</span><br><span class="line">                <span class="string">&quot;pr1ce&quot;</span>:<span class="number">8.99</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;category&quot;</span>:<span class="string">&quot;fiction&quot;</span>,</span><br><span class="line">                <span class="string">&quot;author&quot;</span>:<span class="string">&quot;J.R.R.Tolkien&quot;</span>,</span><br><span class="line">                <span class="string">&quot;title&quot;</span>:<span class="string">&quot;The Lord of the Rings&quot;</span>,</span><br><span class="line">                <span class="string">&quot;1sbn&quot;</span>:<span class="string">&quot;0-395-19395-8&quot;</span>,</span><br><span class="line">                <span class="string">&quot;price&quot;</span>:<span class="number">22.99</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;bicycle&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;color&quot;</span>:<span class="string">&quot;red&quot;</span>,</span><br><span class="line">            <span class="string">&quot;price&quot;</span>:<span class="number">19.95</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> jsonpath <span class="keyword">import</span> jsonpath</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(jsonpath(book_dict,<span class="string">&#x27;S.,author)#如果取不到将返回False#返回列表，如果取不到将返回False</span></span><br></pre></td></tr></table></figure>



<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163155306.png" alt="image-20230807163155306"></p>
<h3 id="jsonpath练习"><a href="#jsonpath练习" class="headerlink" title="jsonpath练习"></a>jsonpath练习</h3><blockquote>
<p>我们以拉勾网城市JSON文件http:&#x2F;<a target="_blank" rel="noopener" href="http://www.lagou.com/Ibs/getAllCitySearchLabels.json%E4%B8%BA%E4%BE%8B%EF%BC%8C%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89">www.lagou.com/Ibs/getAllCitySearchLabels.json为例，获取所有</a><br>城市的名字的列表，并写入文件。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line"><span class="comment"># lxml模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 了解lxml模块和xpath语法</span></span><br><span class="line"></span><br><span class="line">&gt; 对html或xml形式的文本提取特定的内容，就需要我们掌握lxml模块的使用和xpath语法。</span><br><span class="line"></span><br><span class="line">- lxml模块可以利用XPath规则语法，来快速的定位HTML\XML文档中特定元索以及获取节点信息（文本内容、属性值)</span><br><span class="line">- XPath (XML Path Language)是一门在HTML\XML文档中查找信息的语言，可用来在HTML\XML文档</span><br><span class="line">  中对元素和属性进行遍历。</span><br><span class="line">  - W3 School官方文档：http:/www.w3school.com.cn/xpath/index.asp</span><br><span class="line">- 提取xml、html中的数据需要Ixml模块和xpath语法配合使用</span><br><span class="line"></span><br><span class="line"><span class="comment">## 谷歌浏览器xpath helper插件的安装和使用</span></span><br><span class="line"></span><br><span class="line">&gt; 要想利用lxml模块提取数据，需要我们掌握xpath语法规则。接下来我们就来了解一下xpath helper插件，它可以帮助我们练习xpath语法</span><br><span class="line"></span><br><span class="line">**谷歌浏览器xpath helper插件的作用**</span><br><span class="line"></span><br><span class="line">&gt; 在谷歌浏览器中对当前页面测试xpath语法规则</span><br><span class="line"></span><br><span class="line">**谷歌浏览器xpath helper插件的安装和使用**</span><br><span class="line"></span><br><span class="line">&gt; 我们以windows为例进行xpath helper的安装</span><br><span class="line"></span><br><span class="line">**xpath helper:插件的安装**</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>下载Chrome插件XPath Helper</span><br><span class="line"></span><br><span class="line">- 可以在chrome应用商城进行下载，如果无法下载，也可以从下面的链接进行下载</span><br><span class="line">- 下载地址：https://pan.baidu.com/share/init?surl=UM94dcwgus4SgECuoJ-Jcg密码：337b</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>把文件的后缀名crx改为rar,然后解压到同名文件夹中</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>把解压后的文件夹拖入到已经开启开发者模式的chrome浏览器扩展程序界面</span><br><span class="line"></span><br><span class="line">![image-<span class="number">20230807163207464</span>](https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-<span class="number">20230807163207464.</span>png)</span><br><span class="line"></span><br><span class="line">![image-<span class="number">20230807163215809</span>](https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-<span class="number">20230807163215809.</span>png)</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>重启浏览器后，访问url之后在页面中点击xpath图标，就可以使用了</span><br><span class="line"></span><br><span class="line">![image-<span class="number">20230807163223757</span>](https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-<span class="number">20230807163223757.</span>png)</span><br><span class="line"></span><br><span class="line">如果是Iiux或macOS操作系统，无需操作上述的步骤<span class="number">2</span>，直接将crx文件拖入已经开启开发者模式的chrome浏览器扩展程序界面</span><br><span class="line"></span><br><span class="line"><span class="comment">## xpath的节点关系</span></span><br><span class="line"></span><br><span class="line">&gt; 学习xpath语法需要先了解xpath中的节点关系</span><br><span class="line"></span><br><span class="line"><span class="comment">###  xpath中的节点是什么</span></span><br><span class="line"></span><br><span class="line">&gt; 每个html、xml的标签我们都称之为节点，其中最顶层的节点称为根节点。我们以xml为例，html也是一样的</span><br><span class="line"></span><br><span class="line">![image-<span class="number">20230807163232165</span>](https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-<span class="number">20230807163232165.</span>png)</span><br><span class="line"></span><br><span class="line"><span class="comment">###  xpath中节点的关系</span></span><br><span class="line"></span><br><span class="line">![image-<span class="number">20230807163240493</span>](https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-<span class="number">20230807163240493.</span>png)</span><br><span class="line"></span><br><span class="line">author是title的第一个兄弟节点</span><br><span class="line"></span><br><span class="line"><span class="comment">## xpath语法</span></span><br><span class="line"></span><br><span class="line">&gt; <span class="number">1.</span>XPath使用路径表达式来选取XML文档中的节点或者节点集。</span><br><span class="line">&gt;</span><br><span class="line">&gt; <span class="number">2.</span>这些路径表达式和我们在常规的电脑文件系统中看到的表达式非常相似</span><br><span class="line">&gt;</span><br><span class="line">&gt; <span class="number">3.</span>使用chrome插件选择标签时候，选中时，选中的标签会添加属性<span class="keyword">class</span>=<span class="string">&quot;xh-highlight&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### 定位节点以及提取属性或文本内容的语法</span></span><br><span class="line"></span><br><span class="line">![image-<span class="number">20230807163249641</span>](https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-<span class="number">20230807163249641.</span>png)</span><br><span class="line"></span><br><span class="line"> **语法练习**</span><br><span class="line"></span><br><span class="line">&gt; 接下来我们通过itcast的页面来练习上述语法：http:/www.itcast.cn/</span><br><span class="line"></span><br><span class="line">- 选择所有的h2下的文本</span><br><span class="line">  - //h2/text()</span><br><span class="line">- 获取所有的a标签的href</span><br><span class="line">  - //a/@href</span><br><span class="line">- 获取html下的head下的title的文本</span><br><span class="line">  -  /html/head/title/text()</span><br><span class="line">- 获取html下的head下的link标签的href</span><br><span class="line">  - /html/head/link/@href</span><br><span class="line"></span><br><span class="line"><span class="comment">### 选取特定节点的语法</span></span><br><span class="line"></span><br><span class="line">&gt; 可以根据标签的属性值、下标等来获取特定的节点</span><br><span class="line"></span><br><span class="line">![image-<span class="number">20230807163257082</span>](https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-<span class="number">20230807163257082.</span>png)</span><br><span class="line"></span><br><span class="line"><span class="comment">### 关于xpath的下标</span></span><br><span class="line"></span><br><span class="line">- 在xpath中，第一个元素的位置是<span class="number">1</span></span><br><span class="line">- 最后一个元素的位置是last0</span><br><span class="line">- 倒数第二个是last0-<span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">**语法练习**</span><br><span class="line"></span><br><span class="line">&gt; 从tcst的页面中，选择所有学科的名称、第一个学科的链接、最后一个学科的链接：</span><br><span class="line">&gt; http://www.itcast.cn/</span><br><span class="line"></span><br><span class="line">- 所有的学科的名称</span><br><span class="line">  - //div[@<span class="keyword">class</span>=<span class="string">&quot;nav_txt&quot;</span>]//a[@<span class="keyword">class</span>=<span class="string">&quot;a_gd&quot;</span>]</span><br><span class="line">- 第一个学科的链接</span><br><span class="line">  - //div[@<span class="keyword">class</span>=<span class="string">&quot;nav_txt&quot;</span>]/ul/li[<span class="number">1</span>]/a/@href</span><br><span class="line">- 最后一个学科的链接</span><br><span class="line">  - //div[@<span class="keyword">class</span>=<span class="string">&quot;nav_txt&quot;</span>]/ul/li[last()]/a/@href</span><br><span class="line"></span><br><span class="line"><span class="comment">### 选取未知节点的语法</span></span><br><span class="line"></span><br><span class="line">&gt; 可以通过通配符来选取未知的html、xml的元素</span><br><span class="line"></span><br><span class="line">![image-<span class="number">20230807163305272</span>](https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-<span class="number">20230807163305272.</span>png)</span><br><span class="line"></span><br><span class="line">**语法练习**</span><br><span class="line"></span><br><span class="line">&gt; 从itcast的页面中http:/www.itcast.cn/,选中全部的标签、全部的属性</span><br><span class="line"></span><br><span class="line">- 全部的标签</span><br><span class="line">  - // *</span><br><span class="line">- 全部的属性</span><br><span class="line">  - // @*</span><br><span class="line"></span><br><span class="line"><span class="comment">## xml模块的安装与使用示例</span></span><br><span class="line"></span><br><span class="line">&gt; xm模块是一个第三方模块，安装之后使用</span><br><span class="line"></span><br><span class="line"><span class="comment">### xml模块的安装</span></span><br><span class="line"></span><br><span class="line">&gt; 对发送请求获取的xml或htm形式的响应内容进行提取</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">pip install lxml</span><br></pre></td></tr></table></figure>

<h3 id="爬虫对html提取的内容"><a href="#爬虫对html提取的内容" class="headerlink" title="爬虫对html提取的内容"></a>爬虫对html提取的内容</h3><ul>
<li>提取标签中的文本内容</li>
<li>提取标签中的属性的值<ul>
<li>比如，提取a标签中href属性的值，获取url，进而继续发起请求</li>
</ul>
</li>
</ul>
<h3 id="lxml模块的使用"><a href="#lxml模块的使用" class="headerlink" title="lxml模块的使用"></a>lxml模块的使用</h3><p>1.导入lxml的etree库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br></pre></td></tr></table></figure>

<p>2.利用etree.HTML,将html字符串(bytes类型或str类型)转化为Element对象，Element对象具有xpath<br>的方法，返回结果的列表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">html  = etree.HTML(text)</span><br><span class="line">ret_1ist=html.xpath(<span class="string">&quot;xpath语法机则字符串&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>3.xpath方法返回列表的三种情况</p>
<ul>
<li>返回空列表：根据xpath语法规侧字符串，没有定位到任何元素</li>
<li>返回由字符串构成的列表：path字符串规则匹配的一定是文本内容或某属性的值</li>
<li>返回由Element对象构成的列表：xpath规则字符串匹配的是标签，列表中的Element对象可以继续<br>进行xpath</li>
</ul>
<h3 id="7-4-lxml模块使用示例"><a href="#7-4-lxml模块使用示例" class="headerlink" title="7.4  lxml模块使用示例"></a>7.4  lxml模块使用示例</h3><blockquote>
<p>运行下面的代码，查看打印的结果</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">text=<span class="string">&#x27;&#x27;&#x27;&lt;d1v&gt;&lt;ul&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link1.html&quot;&gt;first item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">kli class-&quot;item-inactive&quot;&gt;&lt;a href-&quot;link3.html&quot;&gt;third item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;/ul&gt;&lt;/div&gt;&#x27;&#x27;&#x27;</span></span><br><span class="line">html = etree.HTML(text)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取href的列表和t1t1e的列委</span></span><br><span class="line">href_list = html.xpath(<span class="string">&quot;//li[@class=&#x27;item-1&#x27;]/a/@href&quot;</span>)</span><br><span class="line">title_list = html.xpath(<span class="string">&quot;//li[@class=&#x27;item-1&#x27;]/a/text()&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#组装成字典</span></span><br><span class="line"><span class="keyword">for</span> href <span class="keyword">in</span> href_list:</span><br><span class="line">	item =&#123;&#125;</span><br><span class="line">	item[<span class="string">&quot;href&quot;</span>] = href</span><br><span class="line">	item[<span class="string">&quot;title&quot;</span>]=title_list[href_list.index(href)]</span><br><span class="line">	<span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;href&#x27;</span>: <span class="string">&#x27;link1.html&#x27;</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;first item&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;href&#x27;</span>: <span class="string">&#x27;link2.html&#x27;</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;second item&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;href&#x27;</span>: <span class="string">&#x27;link4.html&#x27;</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;fourth item&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>练习</strong></p>
<blockquote>
<p>将下面的html文挡字符串中，将每个class为item-1的i标签作为1条新闻数据。提取a标签的文本内容以及链接，组装成一个字典。</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">**注意：**</span><br><span class="line"></span><br><span class="line">- 先分组，再提取数据，可以避免数据的错乱</span><br><span class="line">- 对于空值要进行判断</span><br><span class="line"></span><br><span class="line">- 参考代码</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">text=<span class="string">&#x27;&#x27;&#x27;&lt;div&gt;&lt;ul&gt;</span></span><br><span class="line"><span class="string">&lt;1i class=&quot;item-1&quot;&gt;&lt;a&gt;first item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-inactive&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;third item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class-&quot;item-1&quot;&gt;&lt;a href-&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;/u1&gt;&lt;/d1v&gt;&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#根据li标签进行分组</span></span><br><span class="line">html = etree.HTML(text)</span><br><span class="line">li_list = html.xpath(<span class="string">&quot;//li[@class=&#x27;item-1&#x27;]&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在每一组中继续进行数据的提取</span></span><br><span class="line"><span class="keyword">for</span> li <span class="keyword">in</span> li_list:</span><br><span class="line">	item =&#123;&#125;</span><br><span class="line">	item[<span class="string">&quot;href&quot;</span>] =li.xpath(<span class="string">&quot;./a/ehref&quot;</span>)[<span class="number">0</span>]<span class="keyword">if</span> <span class="built_in">len</span>(li.xpath(<span class="string">&quot;./a/ahref&quot;</span>))&gt;<span class="number">0</span> <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">	item[<span class="string">&quot;title&quot;</span>] =li.xpath(<span class="string">&quot;./a/text()&quot;</span>)[<span class="number">0</span>]<span class="keyword">if</span> <span class="built_in">len</span>(li.xpath(<span class="string">&quot;./a/text()&quot;</span>))&gt;<span class="number">0</span> <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">	<span class="built_in">print</span>(item)</span><br></pre></td></tr></table></figure>

<p>运行结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&#x27;href&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;second item&#x27;</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="lxml模块中etree-tostring函数的使用"><a href="#lxml模块中etree-tostring函数的使用" class="headerlink" title="lxml模块中etree.tostring函数的使用"></a>lxml模块中etree.tostring函数的使用</h2><blockquote>
<p>运行下边的代码，观察对比html的原字符串和打印输出的结果</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line">text=<span class="string">&#x27;&#x27;&#x27;&lt;div&gt;&lt;ul&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link1.html&quot;&gt;first item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link2.html&quot;&gt;second item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-inactive&quot;&gt;&lt;a href=&quot;link3.html&quot;&gt;third item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-1&quot;&gt;&lt;a href=&quot;link4.html&quot;&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">&lt;li class=&quot;item-0&quot;&gt;&lt;a href=&quot;link5.html&quot;&gt;fifth item&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;/ul&gt;&lt;/d1v&gt;&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">html = etree.HTML(text)</span><br><span class="line"></span><br><span class="line">handeled_html_str = etree.tostring(html).decode()</span><br><span class="line"><span class="built_in">print</span>(handeled_html_str)</span><br></pre></td></tr></table></figure>

<p><strong>现象和结论</strong></p>
<blockquote>
<p>打印结果和原来相比：</p>
<p>1.自动补全原本缺失的li标签</p>
<p>2.自动补全html等标签</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;&lt;body&gt;&lt;div&gt;&lt;ul&gt;</span><br><span class="line">&lt;li <span class="keyword">class</span>=<span class="string">&quot;item-1&quot;</span>&gt;&lt;a href=<span class="string">&quot;link1.html&quot;</span>&gt;first item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li <span class="keyword">class</span>=<span class="string">&quot;item-1&quot;</span>&gt;&lt;a href=<span class="string">&quot;link2.html&quot;</span>&gt;second item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li <span class="keyword">class</span>=<span class="string">&quot;item-inactive&quot;</span>&gt;&lt;a href=<span class="string">&quot;link3.html&quot;</span>&gt;third item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li <span class="keyword">class</span>=<span class="string">&quot;item-1&quot;</span>&gt;&lt;a href=<span class="string">&quot;link4.html&quot;</span>&gt;fourth item&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">&lt;li <span class="keyword">class</span>=<span class="string">&quot;item-0&quot;</span>&gt;&lt;a href=<span class="string">&quot;link5.html&quot;</span>&gt;fifth item&lt;/a&gt;</span><br><span class="line">&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p><strong>结论：</strong></p>
<ul>
<li>lxml.etree.HTML(html_str)可以自动补全标签</li>
<li>lxml.etree.tostring函数可以将转换为Element对象再转换回html字符串</li>
<li>爬虫如果使用lxml来提取数据，应该以lxml.etree.tostring的返回结果作为提取数据的依据</li>
</ul>
<h1 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），可以用来检查一个串是否含有某种子串、将匹配的子串替换或者从某个串中取出符合某个条件的子串等。</p>
<h2 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h2><p>1.给定的字符串是否符合正则表达式的过滤逻辑（称作“匹配”）。</p>
<p>2.可以通过正则表达式，从字符串中获取我们想要的特定部分。</p>
<p>3.还可以对目标字符串进行替换操作。</p>
<h2 id="常用匹配符"><a href="#常用匹配符" class="headerlink" title="常用匹配符"></a>常用匹配符</h2><p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163328682.png" alt="image-20230807163328682"></p>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163340471.png" alt="image-20230807163340471"></p>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163351205.png" alt="image-20230807163351205"></p>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163358570.png" alt="image-20230807163358570"></p>
<h2 id="re模块常用的函数"><a href="#re模块常用的函数" class="headerlink" title="re模块常用的函数"></a>re模块常用的函数</h2><p><strong>match 方法</strong><br>re.match 尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功的话，match()就返回 None。语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.<span class="keyword">match</span>(pattern, string, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>参数说明如下：</p>
<ul>
<li>pattern：表示模式字符串，由要匹配的正则表达式转换而来；</li>
<li>string：表示要匹配的字符串；</li>
<li>flags：可选参数，表示标志位，用于控制匹配方式，如是否区分字母大小写。</li>
</ul>
<p><strong>search 方法</strong><br>search 在一个字符串中搜索满足文本模式的字符串。语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.search(pattern, string, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>参数说明如下：</p>
<ul>
<li>pattern：表示模式字符串，由要匹配的正则表达式转换而来；</li>
<li>string：表示要匹配的字符串；</li>
<li>flags：可选参数，表示标志位，用于控制匹配方式，如是否区分字母大小写。</li>
</ul>
<p><strong>sub 和 subn 搜索与替换</strong><br>sub 函数和 subn 函数用于实现搜索和替换功能。这两个函数的功能几乎完全相同，都是将某个字符串中所有匹配正则表达式的部分替换成其他字符串。用来替换的部分可能是一个字符串，也可以是一个函数，该函数返回一个用来替换的字符串。sub 函数返回替换后的结果，subn 函数返回一个元组，元组的第 1 个元素是替换后的结果，第 2 个元素是替换的总数。语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.sub(pattern, repl, string, count=<span class="number">0</span>, flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li>pattern：表示模式字符串，由要匹配的正则表达式转换而来；</li>
<li>pattern：表示替换的字符串；</li>
<li>string：表示要被查找替换的原始字符串；</li>
<li>count：可选参数，表示模式匹配后替换的最大次数，默认值为0，表示替换所有的匹配；</li>
<li>flags：可选参数，表示标志位，用于控制匹配方式，如是否区分字母大小写。</li>
</ul>
<p><strong>compile 函数</strong><br>compile 函数用于编译正则表达式，生成一个正则表达式（ Pattern ）对象，供 match()和 search() 这两个函数使用。语法格式为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.<span class="built_in">compile</span>(pattern[, flags])</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li>pattern：一个字符串形式的正则表达式</li>
<li>flags：可选，表示匹配模式，比如忽略大小写，多行模式等，</li>
</ul>
<p><strong>findall 函数</strong><br>在字符串中找到正则表达式所匹配的所有子串，并返回一个列表，如果没有找到匹配的，则返回空列表。语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.findall(pattern,string,[flags])</span><br></pre></td></tr></table></figure>

<p>参数说明如下：</p>
<ul>
<li>pattern：表示模式字符串，由要匹配的正则表达式转换而来；</li>
<li>string：表示要匹配的字符串；</li>
<li>flags：可选参数，表示标志位，用于控制匹配方式，如是否区分字母大小写。</li>
</ul>
<p><strong>finditer 函数</strong><br>和 findall 类似，在字符串中找到正则表达式所匹配的所有子串，并把它们作为一个迭代器返回。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.finditer(pattern,string,[flags])</span><br></pre></td></tr></table></figure>

<p>参数说明如下：</p>
<ul>
<li>pattern：表示模式字符串，由要匹配的正则表达式转换而来；</li>
<li>string：表示要匹配的字符串；</li>
<li>flags：可选参数，表示标志位，用于控制匹配方式，如是否区分字母大小写。</li>
</ul>
<p><strong>split 函数</strong><br>split 函数用于根据正则表达式分隔字符串，也就是说，将字符串与模式匹配的子字符串都作为分隔符来分隔这个字符串。split 函数返回一个列表形式的分隔结果，每一个列表元素都是分隔的子字符串。语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.split(pattern, string[, maxsplit=<span class="number">0</span>, flags=<span class="number">0</span>])</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li>pattern：匹配的正则表达式；</li>
<li>string：表示要匹配的字符串；</li>
<li>maxsplit：分隔次数，maxsplit&#x3D;1分隔一次，默认为0，不限制次数。</li>
<li>flags：可选参数，表示标志位，用于控制匹配方式，如是否区分字母大小写，多行匹配等等。</li>
</ul>
<p><strong>split()方法</strong></p>
<p>split()方法用于实现根据正则表达式分割字符串，并以列表的形式返回。其语法格式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.split(pattern,string,[maxsplit],[flags])</span><br></pre></td></tr></table></figure>

<p>参数说明如下：</p>
<ul>
<li>pattern：表示模式字符串，由要匹配的正则表达式转换而来；</li>
<li>string：表示要匹配的字符串；</li>
<li>maxsplit：可选参数，表示最大的拆分次数；</li>
<li>ags：可选参数，表示标志位，用于控制匹配方式，如是否区分字母大小写。</li>
</ul>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a><strong>分组</strong></h2><p>如果一个模式字符串中有用一对圆括号括起来的部分，那么这部分就会作为一组，可以通过 group 方法的参数获取指定的组匹配的字符串。当然，如果模式字符串中没有任何用圆括号括起来的部分，那么就不会对待匹配的字符串进行分组。</p>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163408884.png" alt="image-20230807163408884"></p>
<p>使用分组要了解如下几点：</p>
<ul>
<li>只有圆括号括起来的部分才算一组，如果模式字符串中既有圆括号括起来的部分，也有没有被圆括号括起来的部分，那么只会将被圆括号括起来的部分算作一组，其它的部分忽略。</li>
<li>用 group 方法获取指定组的值时，组从 1 开始，也就是说，group(1)获取第 1 组的值，group(2)获取第 2 组的值，以此类推。</li>
<li>groups 方法用于获取所有组的值，以元组形式返回。所以除了使用 group(1)获取第1 组的值外，还可以使用 groups()[0]获取第 1 组的值。获取第 2 组以及其它组的值的方式类似。</li>
</ul>
<h2 id="贪婪模式和非贪婪"><a href="#贪婪模式和非贪婪" class="headerlink" title="贪婪模式和非贪婪"></a><strong>贪婪模式和非贪婪</strong></h2><p>贪婪模式指 Python 里数量词默认是贪婪的，总是尝试匹配尽可能多的字符。非贪婪模式与贪婪相反，总是尝试匹配尽可能少的字符，可以使用”*”,”?”,”+”,”{m,n}”后面加上？，使贪婪变成非贪婪</p>
<h1 id="BeautifulSoup4库"><a href="#BeautifulSoup4库" class="headerlink" title="BeautifulSoup4库"></a>BeautifulSoup4库</h1><p><strong>一、什么是BeautifulSoup4库？</strong></p>
<p>和 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=lxml&spm=1001.2101.3001.7020">lxml</a> 一样，Beautiful Soup 也是一个HTML&#x2F;XML的解析器，主要的功能也是如何解析和提取 HTML&#x2F;XML 数据。简单来说，Beautiful Soup只是一个从html字符串提取数据的工具而已。</p>
<p><strong>二、性能差异？</strong></p>
<p>lxml 只会局部遍历，Beautiful Soup 是基于HTML DOM（Document Object Model）的，会载入整个文档，解析整个DOM树，因此时间和内存开销都会大很多，所以性能要低于lxml。Beautiful Soup 提取数据速度最慢。</p>
<p><strong>三、如何安装？</strong></p>
<p>1.在线安装：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install bs4</span><br></pre></td></tr></table></figure>

<p>离线安装</p>
<p><img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/image-20230807163418582.png" alt="image-20230807163418582"></p>
<p>转到对应的盘符下pip install +文件名即可。</p>
<p><strong>四、测试</strong></p>
<p>1.在cmd命令行输入Python,然后import bs4，如果成功则表示已经安装成功。</p>
<p>打开spyder，然后import bs4，如果成功则表示安装成功。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/mm_facetoface_collect_qrcode_1690448192277.png" alt="天海 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="https://tianhei-alyun.oss-cn-beijing.aliyuncs.com/1690448212406.jpg" alt="天海 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
              <a href="/tags/%E7%88%AC%E8%99%AB/" rel="tag"># 爬虫　</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2023/08/07/python%E7%88%AC%E8%99%AB/02requests%E6%A8%A1%E5%9D%97/" rel="prev" title="requests模块">
                  <i class="fa fa-angle-left"></i> requests模块
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2023/08/08/nas/TMDB%20API%E7%94%B3%E8%AF%B7/" rel="next" title="TMDB API申请">
                  TMDB API申请 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">天海</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
